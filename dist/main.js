(()=>{"use strict";const e=e=>{if(!e||e<1)throw"length must be greater than 0";if(e>5)throw"length must be less than 5";const t=e,n=Array(t).fill(!1);let r=0,a=-1,c=-1;return{getLength:()=>t,hit:(e,l)=>{if(e!==a)return!1;const d=l-c;return d>=0&&d<n.length&&(!1===n[d]&&(n[d]=!0,r<t&&(r+=1)),!0)},getHits:()=>r,isSunk:()=>r===t,setCoord:(e,t)=>{a=e,c=t}}},t=(t,n,r)=>{const a=(()=>{let t=null;const n=[];let r=!1;return{getMyTurn:()=>r,setMyTurn:e=>{r=e},createGameboard:r=>{for(let e=0;e<r;e++){const e=[];n.push(e);for(let t=0;t<r;t++)e.push(!1)}t=(e=>{const t=e,n=[],r=[];for(let t=0;t<e;t++){const t=[];n.push(t);for(let n=0;n<e;n++)t.push(null)}return{getBoard:()=>n,receiveAttack:(e,t)=>{for(const a of r)if(a.hit(e,t))return n[e][t]=-1*n[e][t],!0;return!1},canPlaceShip:(e,r,a)=>{if(r<0||a<0||r>=t||a>=t)return!1;if(r+e.getLength()>=t)return!1;for(let t=0;t<e.getLength();t++)if(null!=n[r][a+t])return!1;return!0},placeShip:(e,t,a)=>{e.setCoord(t,a);for(let r=0;r<e.getLength();r++)n[t][a+r]=1;r.push(e)},allShipsSunk:()=>r.every((e=>e.isSunk()))}})(r);let a=0,c=5;for(;a<=5;){let n=Math.floor(5*Math.random()),r=Math.floor(5*Math.random());const l=e(c);t.canPlaceShip(l,n,r)&&(t.placeShip(l,n,r),c>=3&&(c-=1),a+=1)}},getGameboard:()=>t,canAttack:(e,t)=>n[e][t],attack:(e,t,n)=>e.receiveAttack(t,n),receiveAttack:(e,n)=>t.receiveAttack(e,n)}})();a.createGameboard(n);const c=a.getGameboard().getBoard(),l=document.createElement("div"),d=document.createElement("div");d.classList.add("player-name"),d.textContent=t,l.appendChild(d);const o=document.createElement("div");o.id=r,o.classList.add("gameboard"),l.appendChild(o);for(let e=0;e<n;e++)for(let t=0;t<n;t++){const n=document.createElement("div");n.id=`${r}_${e}_${t}`,n.classList.add("cell"),c[e][t]>0?n.classList.add("cell-safe"):c[e][t]<0&&n.classList.add("cell-hit"),n.addEventListener("click",(()=>{!0===a.receiveAttack(e,t)&&n.classList.add("cell-hit")})),o.appendChild(n)}return l},n=(()=>{const e=document.createElement("div");e.id="app";const n=document.createElement("button");n.id="newGame",n.classList.add("btn","btn-primary"),n.textContent="New game",e.appendChild(n);const r=document.createElement("div");return r.id="boards",r.classList.add("boards"),e.appendChild(r),n.addEventListener("click",(()=>{r.innerHTML="";const e=t("Player",10,"player"),n=t("Computer",10,"computer");r.appendChild(e),r.appendChild(n)})),e})();document.getElementById("root").appendChild(n)})();